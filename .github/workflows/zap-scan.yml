---
name: Run OWASP-ZAP Scan
on:
  workflow_call:
    inputs:
      url:
        required: true
        type: string

jobs:
  zap_scan:
    name: Scan site with OWASP-ZAP
    runs-on: ubuntu-latest
    env:
      url: ${{ inputs.url }}
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Pull Zap Container
        run: docker pull owasp/zap2docker-stable

      - name: Run OWASP-ZAP
        run: docker run -v $(pwd):/zap/wrk/:rw -t owasp/zap2docker-stable zap-baseline.py -t https://fac-dev.app.cloud.gov/ -c zap.conf -I
