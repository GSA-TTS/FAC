{
   "$schema": "https://json-schema.org/draft/2019-09/schema#",
   "additionalProperties": false,
   "metamodel_version": "1.7.0",
   "properties": {
      "FederalAwards": {
         "additionalProperties": false,
         "properties": {
            "auditee_uei": {
               "allOf": [
                  {
                     "maxLength": 12,
                     "minLength": 12
                  },
                  {
                     "pattern": "^[A-H,J-N,P-Z,a-z,1-9][A-H,J-N,P-Z,a-z,0-9]+$"
                  },
                  {
                     "pattern": "^(?![A-H,J-N,P-Z,a-z,1-9]+[A-H,J-N,P-Z,a-z,0-9]*?[0-9]{9})[A-H,J-N,P-Z,a-z,0-9]*$"
                  }
               ],
               "type": "string"
            },
            "federal_awards": {
               "items": {
                  "additionalProperties": false,
                  "description": "Award entry rows",
                  "properties": {
                     "cluster": {
                        "allOf": [
                           {
                              "if": {
                                 "not": {
                                    "properties": {
                                       "cluster_name": {
                                          "enum": [
                                             "OTHER CLUSTER NOT LISTED ABOVE",
                                             "STATE CLUSTER"
                                          ]
                                       }
                                    }
                                 }
                              },
                              "then": {
                                 "allOf": [
                                    {
                                       "properties": {
                                          "other_cluster_name": {
                                             "description": "Empty string or null",
                                             "enum": [
                                                "",
                                                "null"
                                             ],
                                             "title": "EmptyString_Null"
                                          }
                                       }
                                    },
                                    {
                                       "properties": {
                                          "state_cluster_name": {
                                             "description": "Empty string or null",
                                             "enum": [
                                                "",
                                                "null"
                                             ],
                                             "title": "EmptyString_Null"
                                          }
                                       }
                                    }
                                 ]
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "cluster_name": {
                                       "const": "STATE CLUSTER"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "state_cluster_name": {
                                       "minLength": 1,
                                       "type": "string"
                                    }
                                 },
                                 "required": [
                                    "state_cluster_name"
                                 ]
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "cluster_name": {
                                       "const": "OTHER CLUSTER NOT LISTED ABOVE"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "other_cluster_name": {
                                       "minLength": 1,
                                       "type": "string"
                                    }
                                 },
                                 "required": [
                                    "other_cluster_name"
                                 ]
                              }
                           }
                        ],
                        "properties": {
                           "cluster_name": {
                              "description": "Cluster Name",
                              "enum": [
                                 "N/A",
                                 "RESEARCH AND DEVELOPMENT",
                                 "STUDENT FINANCIAL ASSISTANCE",
                                 "STATE CLUSTER",
                                 "477 CLUSTER",
                                 "AGING CLUSTER",
                                 "CCDF CLUSTER",
                                 "CDBG - DISASTER RECOVERY GRANTS - PUB. L. NO. 113-2 CLUSTER",
                                 "CDBG - ENTITLEMENT GRANTS CLUSTER",
                                 "CDFI CLUSTER",
                                 "CHILD NUTRITION CLUSTER",
                                 "CLEAN WATER STATE REVOLVING FUND CLUSTER",
                                 "COMMUNITY FACILITIES LOANS AND GRANTS CLUSTER",
                                 "DISABILITY INSURANCE/SSI CLUSTER",
                                 "DRINKING WATER STATE REVOLVING FUND CLUSTER",
                                 "ECONOMIC DEVELOPMENT CLUSTER",
                                 "EMPLOYMENT SERVICE CLUSTER",
                                 "FEDERAL TRANSIT CLUSTER",
                                 "FISH AND WILDLIFE CLUSTER",
                                 "FOOD DISTRIBUTION CLUSTER",
                                 "FOREIGN FOOD AID DONATION CLUSTER",
                                 "FOREST SERVICE SCHOOLS AND ROADS CLUSTER",
                                 "FOSTER GRANDPARENT/SENIOR COMPANION CLUSTER",
                                 "HEAD START CLUSTER",
                                 "HEALTH CENTER PROGRAM CLUSTER",
                                 "HIGHWAY PLANNING AND CONSTRUCTION CLUSTER",
                                 "HIGHWAY SAFETY CLUSTER",
                                 "HOPE VI CLUSTER",
                                 "HOUSING VOUCHER CLUSTER",
                                 "HURRICANE SANDY RELIEF CLUSTER",
                                 "MATERNAL, INFANT, AND EARLY CHILDHOOD HOME VISITING CLUSTER",
                                 "MEDICAID CLUSTER",
                                 "SCHOOL IMPROVEMENT GRANTS CLUSTER",
                                 "SECTION 8 PROJECT-BASED CLUSTER",
                                 "SNAP CLUSTER",
                                 "SPECIAL EDUCATION CLUSTER (IDEA)",
                                 "TANF CLUSTER",
                                 "TRANSIT SERVICES PROGRAMS CLUSTER",
                                 "TRIO CLUSTER",
                                 "WATER AND WASTE PROGRAM CLUSTER",
                                 "WIOA CLUSTER",
                                 "OTHER CLUSTER NOT LISTED ABOVE"
                              ],
                              "title": "ClusterName",
                              "type": "string"
                           },
                           "cluster_total": {
                              "type": "number"
                           }
                        },
                        "required": [
                           "cluster_name",
                           "cluster_total"
                        ],
                        "type": "object"
                     },
                     "direct_or_indirect_award": {
                        "additionalProperties": false,
                        "allOf": [
                           {
                              "if": {
                                 "properties": {
                                    "is_direct": {
                                       "const": "Y"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "entities": {
                                       "description": "Empty string, empty array, or null",
                                       "enum": [
                                          "",
                                          [ ],
                                          "null"
                                       ],
                                       "title": "EmptyString_Null"
                                    }
                                 }
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "is_direct": {
                                       "const": "N"
                                    }
                                 }
                              },
                              "then": {
                                 "required": [
                                    "entities"
                                 ]
                              }
                           }
                        ],
                        "description": "If direct_award is N, the form must include a list of the pass-through entity by name and identifying number",
                        "properties": {
                           "entities": {
                              "items": {
                                 "additionalProperties": false,
                                 "properties": {
                                    "passthrough_identifying_number": {
                                       "minLength": 1,
                                       "type": "string"
                                    },
                                    "passthrough_name": {
                                       "type": "string"
                                    }
                                 },
                                 "required": [
                                    "passthrough_name",
                                    "passthrough_identifying_number"
                                 ],
                                 "type": "object"
                              },
                              "type": "array"
                           },
                           "is_direct": {
                              "enum": [
                                 "Y",
                                 "N"
                              ],
                              "type": "string"
                           }
                        },
                        "type": "object"
                     },
                     "loan_or_loan_guarantee": {
                        "additionalProperties": false,
                        "allOf": [
                           {
                              "if": {
                                 "properties": {
                                    "is_guaranteed": {
                                       "const": "Y"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "loan_balance_at_audit_period_end": {
                                       "anyOf": [
                                          {
                                             "minimum": 1,
                                             "type": "integer"
                                          },
                                          {
                                             "enum": [
                                                "N/A"
                                             ],
                                             "title": "N/A",
                                             "type": "string"
                                          }
                                       ]
                                    }
                                 },
                                 "required": [
                                    "loan_balance_at_audit_period_end"
                                 ]
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "is_guaranteed": {
                                       "const": "N"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "loan_balance_at_audit_period_end": {
                                       "description": "Empty string, zero, or null expected.",
                                       "enum": [
                                          "",
                                          0,
                                          "null"
                                       ],
                                       "title": "EmptyString_Zero_Null"
                                    }
                                 }
                              }
                           }
                        ],
                        "description": "A loan or loan guarantee and balance",
                        "properties": {
                           "is_guaranteed": {
                              "enum": [
                                 "Y",
                                 "N"
                              ],
                              "type": "string"
                           },
                           "loan_balance_at_audit_period_end": {
                              "type": [
                                 "number",
                                 "string"
                              ]
                           }
                        },
                        "required": [
                           "is_guaranteed"
                        ],
                        "type": "object"
                     },
                     "program": {
                        "additionalProperties": false,
                        "allOf": [
                           {
                              "if": {
                                 "properties": {
                                    "is_major": {
                                       "const": "Y"
                                    }
                                 }
                              },
                              "then": {
                                 "else": {
                                    "properties": {
                                       "audit_report_type": {
                                          "description": "Major program report types",
                                          "enum": [
                                             "U",
                                             "Q",
                                             "A",
                                             "D"
                                          ],
                                          "title": "MajorProgramAuditReportType",
                                          "type": "string"
                                       },
                                       "number_of_audit_findings": {
                                          "const": 0,
                                          "type": "integer"
                                       }
                                    }
                                 },
                                 "if": {
                                    "properties": {
                                       "audit_report_type": {
                                          "anyOf": [
                                             {
                                                "const": "A"
                                             },
                                             {
                                                "const": "Q"
                                             }
                                          ]
                                       }
                                    }
                                 },
                                 "then": {
                                    "properties": {
                                       "number_of_audit_findings": {
                                          "exclusiveMinimum": 0,
                                          "type": "integer"
                                       }
                                    }
                                 }
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "is_major": {
                                       "const": "N"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "audit_report_type": {
                                       "description": "Empty string or null",
                                       "enum": [
                                          "",
                                          "null"
                                       ],
                                       "title": "EmptyString_Null"
                                    },
                                    "number_of_audit_findings": {
                                       "const": 0
                                    }
                                 }
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "three_digit_extension": {
                                       "pattern": "^(RD|U[0-9]{2})$"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "additional_award_identification": {
                                       "minLength": 1,
                                       "type": "string"
                                    }
                                 },
                                 "required": [
                                    "additional_award_identification"
                                 ]
                              }
                           }
                        ],
                        "properties": {
                           "additional_award_identification": {
                              "type": [
                                 "string",
                                 "null"
                              ]
                           },
                           "amount_expended": {
                              "type": "number"
                           },
                           "audit_report_type": {
                              "type": "string"
                           },
                           "federal_agency_prefix": {
                              "description": "Valid two-digit program numbers; part of the CFDA/ALN",
                              "enum": [
                                 "1",
                                 "2",
                                 "3",
                                 "4",
                                 "7",
                                 "8",
                                 "9",
                                 "10",
                                 "11",
                                 "12",
                                 "13",
                                 "14",
                                 "15",
                                 "16",
                                 "17",
                                 "18",
                                 "19",
                                 "20",
                                 "21",
                                 "22",
                                 "23",
                                 "27",
                                 "29",
                                 "30",
                                 "32",
                                 "33",
                                 "34",
                                 "36",
                                 "39",
                                 "40",
                                 "41",
                                 "42",
                                 "43",
                                 "44",
                                 "45",
                                 "46",
                                 "47",
                                 "53",
                                 "57",
                                 "58",
                                 "59",
                                 "60",
                                 "61",
                                 "62",
                                 "64",
                                 "66",
                                 "68",
                                 "70",
                                 "77",
                                 "78",
                                 "81",
                                 "82",
                                 "83",
                                 "84",
                                 "85",
                                 "86",
                                 "87",
                                 "88",
                                 "89",
                                 "90",
                                 "91",
                                 "92",
                                 "93",
                                 "94",
                                 "96",
                                 "97",
                                 "98"
                              ],
                              "type": "string"
                           },
                           "federal_program_total": {
                              "type": "number"
                           },
                           "is_major": {
                              "enum": [
                                 "Y",
                                 "N"
                              ],
                              "type": "string"
                           },
                           "number_of_audit_findings": {
                              "type": "integer"
                           },
                           "program_name": {
                              "type": "string"
                           },
                           "three_digit_extension": {
                              "description": "Three Digit Extension",
                              "pattern": "^(RD|[0-9]{3}[A-Za-z]{0,1}|U[0-9]{2})$",
                              "title": "ThreeDigitExtension",
                              "type": "string"
                           }
                        },
                        "required": [
                           "program_name",
                           "federal_agency_prefix",
                           "three_digit_extension",
                           "is_major",
                           "audit_report_type",
                           "number_of_audit_findings"
                        ],
                        "type": "object"
                     },
                     "subrecipients": {
                        "additionalProperties": false,
                        "allOf": [
                           {
                              "if": {
                                 "properties": {
                                    "is_passed": {
                                       "const": "Y"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "subrecipient_amount": {
                                       "type": "integer"
                                    }
                                 },
                                 "required": [
                                    "subrecipient_amount"
                                 ]
                              }
                           },
                           {
                              "if": {
                                 "properties": {
                                    "is_passed": {
                                       "const": "N"
                                    }
                                 }
                              },
                              "then": {
                                 "properties": {
                                    "subrecipient_amount": {
                                       "description": "Empty string, zero, or null expected.",
                                       "enum": [
                                          "",
                                          0,
                                          "null"
                                       ],
                                       "title": "EmptyString_Zero_Null"
                                    }
                                 }
                              }
                           }
                        ],
                        "properties": {
                           "is_passed": {
                              "enum": [
                                 "Y",
                                 "N"
                              ],
                              "type": "string"
                           },
                           "subrecipient_amount": {
                              "type": [
                                 "number",
                                 "string"
                              ]
                           }
                        },
                        "type": "object"
                     }
                  },
                  "required": [
                     "cluster",
                     "direct_or_indirect_award",
                     "loan_or_loan_guarantee",
                     "program",
                     "subrecipients"
                  ],
                  "title": "FederalAwardEntry",
                  "type": "object"
               },
               "type": "array"
            },
            "total_amount_expended": {
               "type": [
                  "number",
                  "null"
               ]
            }
         },
         "required": [
            "auditee_uei",
            "total_amount_expended"
         ],
         "title": "FederalAward",
         "type": "object",
         "version": 20230408
      }
   },
   "title": "UNNAMED",
   "type": "object",
   "version": 20230408
}
