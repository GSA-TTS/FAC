{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="grid-container margin-top-6">
{% comment %}
{'general_information': {'status': 'same'}, 
 'audit_information': {'status': 'same'}, 
 'federal_awards': {'status': 'same'}, 
 'corrective_action_plan': {'status': 'same'}, 
 'findings_text': {'status': 'same'}, 
 'findings_uniform_guidance': {'status': 'same'}, 
 'additional_ueis': {'status': 'same'}, 'additional_eins': {'status': 'same'}, 'secondary_auditors': {'status': 'same'}, 'notes_to_sefa': {'status': 'same'}, 'tribal_data_consent': {'status': 'same'}}
{% endcomment%}

<div class="grid-container">
    <div class="grid-row">
      <div class="tablet:grid-col">
        <h3> </h3>
      </div>
      <div class="tablet:grid-col">
        <h3>Report {{r1|slice:"15:"}}</h3>
      </div>
      <div class="tablet:grid-col">
        <h3>Report {{r2|slice:"15:"}}</h3>
      </div>
    </div> <!-- Header row end -->
    
    {% comment %} each key is a section, mapped to what changed {% endcomment %}
    {% for section, changed in comparison.items %}

    {% comment %} 
      each section contains a tag "status" (same, changed) and "in_r1", "in_r2" as lists
    {% endcomment %}
    
      {% if changed.status == "same" %}
        <!-- <div class="grid-row"><div class="tablet:grid-col"><p>No differences detected.</p></div></div> -->
      {% else %}
    <div class="grid-row">
      <div class="tablet:grid-col">
        <h2>{{nice_names | KV:section}}</h2>
      </div>        
    </div>

      {% if changed.in_r1|length > 0 %}
        <div class="grid-row">
          <div class=""tablet:grid-col"><h4>In first report</h4></div>
        </div>
      {% endif %}
      {% for d in changed.in_r1|dictsort:"key" %}
        <div class="grid-row margin-top-2 margin-bottom-2">
          <div class="tablet:grid-col">
            {{d.key|repl:"_| "|title}}
          </div>
          <div class="tablet:grid-col">
            {% if d.from is None %}
              No value
            {% else %}
              {{d.from}}
            {% endif %}
          </div>
          <div class="tablet:grid-col">
            {% if d.to is None %}
              No value
            {% else %}
              {{d.to}}
            {% endif %}
          </div>
        </div>
      {% endfor %}
      {% if changed.in_r2|length > 0 %}
        <div class="grid-row">
          <div class=""tablet:grid-col"><h4>In second report</h4></div>
        </div>
      {% endif %}
      {% for d in changed.in_r2|dictsort:"key" %}
        <div class="grid-row margin-top-2 margin-bottom-2">
          <div class="tablet:grid-col">
            {{d.key|repl:"_| "|title}}
          </div>
          <div class="tablet:grid-col">
            {% if d.from == None %}
              No value
            {% else %}
              {{d.from}}
            {% endif %}
          </div>
          <div class="tablet:grid-col">
            {% if d.to == None %}
              No value
            {% else %}
              {{d.to}}
            {% endif %}
          </div>
        </div>
      {% endfor %}
      {% if changed.in_both|length > 0 %}
        <div class="grid-row">
          <div class=""tablet:grid-col"><h4>Changed from first to second report</h4></div>
        </div>
      {% endif %}
      {% for d in changed.in_both|dictsort:"key" %}
        <div class="grid-row margin-top-2 margin-bottom-2">
          <div class="tablet:grid-col">
            {{d.key|repl:"_| "|title}}
          </div>
          {% if d.from == d.to %}
          <div class="tablet:grid-col"></div>
          <div class="tablet:grid-col"></div>
          {% else %}
          <div class="tablet:grid-col">
            {% if d.from == None %}
              No value
            {% else %}
              {{d.from}}
            {% endif %}
          </div>
          <div class="tablet:grid-col">
            {% if d.to == None %}
              No value
            {% else %}
              {{d.to}}
            {% endif %}
          </div>
        {% endif %}
        </div> <!-- end row -->
      {% endfor %}


      {% endif %}
    {% endfor %}
</div>
{% endblock content %}
