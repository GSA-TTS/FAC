{% extends "report_submission/step-base.html" %}
{% load static %}
{% load sprite_helper %}
{% block step-content %}
    <div class="grid-container margin-y-6 audit-submission-access">
        <div class="grid-row">
            <form class="usa-form usa-form--large" id="grant-access" method="post">
                {% csrf_token %}
                <fieldset class="usa-fieldset">
                    <legend class="usa-legend usa-legend--large">
                        Who will need access to this audit?
                    </legend>
                    <p>Enter the email address for everyone who will need to edit the audit submission.</p>
                    <p class="required-explanation">
                        <abbr title="required" class="usa-hint usa-hint--required">*</abbr> Indicates a required field.
                    </p>
                    <fieldset class="usa-fieldset question"
                              aria-labelledby="certifying_auditee_contact_legend certifying_auditee_contact_instruction">
                        <legend id="certifying_auditee_contact_legend" class="usa-legend">
                            Auditee certifying official
                        </legend>
                        <div class="grid-container">
                            <p id="certifying_auditee_contact_instruction">
                                This individual will electronically certify (sign) the
                                audit submission on behalf of the auditee.
                            </p>
                            <div class="grid-row grid-gap">
                                <div class="usa-form-group">
                                    <label class="usa-label" for="certifying_auditee_contact_fullname">
                                        Full name
                                        <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                    </label>
                                    <ul class="usa-error-message"
                                        id="certifying_auditee_contact_fullname-error-message"
                                        role="alert">
                                        <li id="certifying_auditee_contact_fullname-not-null" hidden>Please enter the certifying official's full name.</li>
                                    </ul>
                                    <input class="usa-input"
                                           id="certifying_auditee_contact_fullname"
                                           name="certifying_auditee_contact_fullname"
                                           aria-required="true"
                                           required
                                           data-validate-not-null=""/>
                                </div>
                            </div>
                            <div class="grid-row grid-gap">
                                <div class="tablet:grid-col-fill">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="certifying_auditee_contact_email">
                                            Email address
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="certifying_auditee_contact_email-error-message"
                                            role="alert">
                                            <li id="certifying_auditee_contact_email-not-null" hidden>Please enter a valid email address</li>
                                            <li id="certifying_auditee_contact_email-email" hidden>
                                                An email address should have a username, an &#39;@&#39; symbol, and a domain name
                                            </li>
                                        </ul>
                                        <input class="usa-input"
                                               id="certifying_auditee_contact_email"
                                               name="certifying_auditee_contact"
                                               aria-required="true"
                                               required
                                               data-validate-not-null=""
                                               data-validate-email=""/>
                                    </div>
                                </div>
                                <div class="tablet:grid-col-fill">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="certifying_auditee_contact_re_email">
                                            Re-enter email address
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="certifying_auditee_contact_re_email-error-message"
                                            role="alert">
                                            <li id="certifying_auditee_contact_re_email-must-match" hidden>This field should match the one before it</li>
                                        </ul>
                                        <input class="usa-input"
                                               id="certifying_auditee_contact_re_email"
                                               name="certifying_auditee_contact_re_email"
                                               aria-required="true"
                                               required
                                               data-validate-must-match="certifying_auditee_contact_email"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="usa-fieldset question"
                              aria-labelledby="certifying_auditor_contact_legend certifying_auditor_contact_instruction">
                        <legend id="certifying_auditor_contact_legend" class="usa-legend">
                            Auditor certifying official
                        </legend>
                        <div class="grid-container">
                            <p id="certifying_auditor_contact_instruction">
                                This individual will electronically certify (sign) the
                                audit submission on behalf of the auditor.
                            </p>
                            <div class="grid-row grid-gap">
                                <div class="usa-form-group">
                                    <label class="usa-label" for="certifying_auditor_contact_fullname">
                                        Full name
                                        <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                    </label>
                                    <ul class="usa-error-message"
                                        id="certifying_auditor_contact_fullname-error-message"
                                        role="alert">
                                        <li id="certifying_auditor_contact_fullname-not-null" hidden>Please enter the certifying official's full name.</li>
                                    </ul>
                                    <input class="usa-input"
                                           id="certifying_auditor_contact_fullname"
                                           name="certifying_auditor_contact_fullname"
                                           aria-required="true"
                                           required
                                           data-validate-not-null=""/>
                                </div>
                            </div>
                            <div class="grid-row grid-gap">
                                <div class="tablet:grid-col-fill">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="certifying_auditor_contact_email">
                                            Email address
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="certifying_auditor_contact_email-error-message"
                                            role="alert">
                                            <li id="certifying_auditor_contact_email-not-null" hidden>Please enter a valid email address</li>
                                            <li id="certifying_auditor_contact_email-email" hidden>
                                                An email address should have a username, an &#39;@&#39; symbol, and a domain name
                                            </li>
                                        </ul>
                                        <input class="usa-input"
                                               id="certifying_auditor_contact_email"
                                               name="certifying_auditor_contact"
                                               aria-required="true"
                                               required
                                               data-validate-not-null=""
                                               data-validate-email=""/>
                                    </div>
                                </div>
                                <div class="tablet:grid-col-fill">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="certifying_auditor_contact_re_email">
                                            Re-enter email address
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="certifying_auditor_contact_re_email-error-message"
                                            role="alert">
                                            <li id="certifying_auditor_contact_re_email-must-match" hidden>This field should match the one before it</li>
                                        </ul>
                                        <input class="usa-input"
                                               id="certifying_auditor_contact_re_email"
                                               name="certifying_auditor_contact_re_email"
                                               aria-required="true"
                                               required
                                               data-validate-must-match="certifying_auditor_contact_email"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    
                    <fieldset class="usa-fieldset question"
                              aria-labelledby="auditee_contacts_legend dynamic_fieldset_instruction">
                        <legend id="auditee_contacts_legend" class="usa-legend">
                            Auditee contacts
                        </legend>
                        <div class="grid-container auditee_contacts">
                            <p id="dynamic_fieldset_instruction">
                                These individuals will have access to the single audit submission but will not be able to certify the submission.
                            </p>
                            <div class="grid-row grid-gap">
                                <div class="usa-form-group">
                                    <label class="usa-label" for="auditee_contacts_fullname">
                                        Full name
                                        <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                    </label>
                                    <ul class="usa-error-message"
                                        id="auditee_contacts_fullname-error-message"
                                        role="alert">
                                        <li id="auditee_contacts_fullname-not-null" hidden>Please enter the auditee contact's full name.</li>
                                    </ul>
                                    <input class="usa-input"
                                           id="auditee_contacts_fullname"
                                           name="auditee_contacts_fullname"
                                           aria-required="true"
                                           required
                                           data-validate-not-null=""/>
                                </div>
                            </div>
                            <div class="grid-row grid-gap">
                                <div class="tablet:grid-col-fill">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="auditee_contacts_email">
                                            Email address
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="auditee_contacts_email-error-message"
                                            role="alert">
                                            <li id="auditee_contacts_email-not-null" hidden>Please enter a valid email address</li>
                                            <li id="auditee_contacts_email-email" hidden>
                                                An email address should have a username, an &#39;@&#39; symbol, and a domain name
                                            </li>
                                        </ul>
                                        <input class="usa-input"
                                               id="auditee_contacts_email"
                                               name="auditee_contacts"
                                               aria-required="true"
                                               required
                                               data-validate-not-null=""
                                               data-validate-email=""/>
                                    </div>
                                </div>
                                <div class="tablet:grid-col-fill">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="auditee_contacts_re_email">
                                            Re-enter email address
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="auditee_contacts_re_email-error-message"
                                            role="alert">
                                            <li id="auditee_contacts_re_email-must-match" hidden>This field should match the one before it</li>
                                        </ul>
                                        <input class="usa-input"
                                               id="auditee_contacts_re_email"
                                               name="auditee_contacts_re_email"
                                               aria-required="true"
                                               required
                                               data-validate-must-match="auditee_contacts_email"/>
                                    </div>
                                </div>
                            </div>
                            <template id="auditee_contacts-template">
                                <div class="grid-row grid-gap">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="auditee_contacts_fullname">
                                            Full name
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="auditee_contacts_fullname-error-message"
                                            role="alert">
                                            <li id="auditee_contacts_fullname-not-null" hidden>Please enter the auditee contact's full name.</li>
                                        </ul>
                                        <input class="usa-input"
                                               id="auditee_contacts_fullname"
                                               name="auditee_contacts_fullname"
                                               aria-required="true"
                                               required
                                               data-validate-not-null=""/>
                                    </div>
                                </div>
                                <div class="grid-row grid-gap">
                                    <div class="tablet:grid-col-fill">
                                        <div class="usa-form-group">
                                            <label class="usa-label" for="auditee_contacts_email">
                                                Email address
                                                <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                            </label>
                                            <ul class="usa-error-message"
                                                id="auditee_contacts_email-error-message"
                                                role="alert">
                                                <li id="auditee_contacts_email-not-null" hidden>Please enter a valid email address</li>
                                                <li id="auditee_contacts_email-email" hidden>
                                                    An email address should have a username, an &#39;@&#39; symbol, and a domain name
                                                </li>
                                            </ul>
                                            <input class="usa-input"
                                                   id="auditee_contacts_email"
                                                   name="auditee_contacts"
                                                   aria-required="true"
                                                   required
                                                   data-validate-not-null=""
                                                   data-validate-email=""/>
                                        </div>
                                    </div>
                                    <div class="tablet:grid-col-fill">
                                        <div class="usa-form-group">
                                            <label class="usa-label" for="auditee_contacts_re_email">
                                                Re-enter email address
                                                <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                            </label>
                                            <ul class="usa-error-message"
                                                id="auditee_contacts_re_email-error-message"
                                                role="alert">
                                                <li id="auditee_contacts_re_email-must-match" hidden>This field should match the one before it</li>
                                            </ul>
                                            <input class="usa-input"
                                                   id="auditee_contacts_re_email"
                                                   name="auditee_contacts_re_email"
                                                   aria-required="true"
                                                   required
                                                   data-validate-must-match="auditee_contacts_email"/>
                                        </div>
                                    </div>
                                    <button class="usa-button usa-button--unstyled delete-contact"
                                            aria-label="Delete contact"
                                            title="Delete contact">
                                        <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
                                            {% uswds_sprite "cancel" %}
                                        </svg>
                                    </button>
                                </template>
                                <button class="usa-button usa-button--unstyled add-contact">Add another contact</button>
                            </div>
                        </fieldset>

                        <fieldset class="usa-fieldset question"
                                  aria-labelledby="auditor_contacts_legend dynamic_fieldset_instruction">
                            <legend id="auditor_contacts_legend" class="usa-legend">
                                Auditor contacts
                            </legend>
                            <div class="grid-container auditor_contacts">
                                <p id="dynamic_fieldset_instruction">
                                    This individual will have access to upload data and information to the audit submission but will not be able to certify the submission.
                                </p>
                                <div class="grid-row grid-gap">
                                    <div class="usa-form-group">
                                        <label class="usa-label" for="auditor_contacts_fullname">
                                            Full name
                                            <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                        </label>
                                        <ul class="usa-error-message"
                                            id="auditor_contacts_fullname-error-message"
                                            role="alert">
                                            <li id="auditor_contacts_fullname-not-null" hidden>Please enter the auditor contact's full name.</li>
                                        </ul>
                                        <input class="usa-input"
                                               id="auditor_contacts_fullname"
                                               name="auditor_contacts_fullname"
                                               aria-required="true"
                                               required
                                               data-validate-not-null=""/>
                                    </div>
                                </div>
                                <div class="grid-row grid-gap">
                                    <div class="tablet:grid-col-fill">
                                        <div class="usa-form-group">
                                            <label class="usa-label" for="auditor_contacts_email">
                                                Email address
                                                <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                            </label>
                                            <ul class="usa-error-message"
                                                id="auditor_contacts_email-error-message"
                                                role="alert">
                                                <li id="auditor_contacts_email-not-null" hidden>Please enter a valid email address</li>
                                                <li id="auditor_contacts_email-email" hidden>
                                                    An email address should have a username, an &#39;@&#39; symbol, and a domain name
                                                </li>
                                            </ul>
                                            <input class="usa-input"
                                                   id="auditor_contacts_email"
                                                   name="auditor_contacts"
                                                   aria-required="true"
                                                   required
                                                   data-validate-not-null=""
                                                   data-validate-email=""/>
                                        </div>
                                    </div>
                                    <div class="tablet:grid-col-fill">
                                        <div class="usa-form-group">
                                            <label class="usa-label" for="auditor_contacts_re_email">
                                                Re-enter email address
                                                <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                            </label>
                                            <ul class="usa-error-message"
                                                id="auditor_contacts_re_email-error-message"
                                                role="alert">
                                                <li id="auditor_contacts_re_email-must-match" hidden>This field should match the one before it</li>
                                            </ul>
                                            <input class="usa-input"
                                                   id="auditor_contacts_re_email"
                                                   name="auditor_contacts_re_email"
                                                   aria-required="true"
                                                   required
                                                   data-validate-must-match="auditor_contacts_email"/>
                                        </div>
                                    </div>
                                </div>
                                <template id="auditor_contacts-template">
                                    <div class="grid-row grid-gap">
                                        <div class="usa-form-group">
                                            <label class="usa-label" for="auditor_contacts_fullname">
                                                Full name
                                                <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                            </label>
                                            <ul class="usa-error-message"
                                                id="auditor_contacts_fullname-error-message"
                                                role="alert">
                                                <li id="auditor_contacts_fullname-not-null" hidden>Please enter the auditor contact's full name.</li>
                                            </ul>
                                            <input class="usa-input"
                                                   id="auditor_contacts_fullname"
                                                   name="auditor_contacts_fullname"
                                                   aria-required="true"
                                                   required
                                                   data-validate-not-null=""/>
                                        </div>
                                    </div>
                                    <div class="grid-row grid-gap">
                                        <div class="tablet:grid-col-fill">
                                            <div class="usa-form-group">
                                                <label class="usa-label" for="auditor_contacts_email">
                                                    Email address
                                                    <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                                </label>
                                                <ul class="usa-error-message"
                                                    id="auditor_contacts_email-error-message"
                                                    role="alert">
                                                    <li id="auditor_contacts_email-not-null" hidden>Please enter a valid email address</li>
                                                    <li id="auditor_contacts_email-email" hidden>
                                                        An email address should have a username, an &#39;@&#39; symbol, and a domain name
                                                    </li>
                                                </ul>
                                                <input class="usa-input"
                                                       id="auditor_contacts_email"
                                                       name="auditor_contacts"
                                                       aria-required="true"
                                                       required
                                                       data-validate-not-null=""
                                                       data-validate-email=""/>
                                            </div>
                                        </div>
                                        <div class="tablet:grid-col-fill">
                                            <div class="usa-form-group">
                                                <label class="usa-label" for="auditor_contacts_re_email">
                                                    Re-enter email address
                                                    <abbr title="required" class="usa-hint usa-hint--required">*</abbr>
                                                </label>
                                                <ul class="usa-error-message"
                                                    id="auditor_contacts_re_email-error-message"
                                                    role="alert">
                                                    <li id="auditor_contacts_re_email-must-match" hidden>This field should match the one before it</li>
                                                </ul>
                                                <input class="usa-input"
                                                       id="auditor_contacts_re_email"
                                                       name="auditor_contacts_re_email"
                                                       aria-required="true"
                                                       required
                                                       data-validate-must-match="auditor_contacts_email"/>
                                            </div>
                                        </div>
                                        <button class="usa-button usa-button--unstyled delete-contact"
                                                aria-label="Delete contact"
                                                title="Delete contact">
                                            <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
                                                {% uswds_sprite "cancel" %}
                                            </svg>
                                        </button>
                                    </template>
                                    <button class="usa-button usa-button--unstyled add-contact">Add another contact</button>
                                </div>
                            </fieldset>

                            <p id="email-notice">The above contacts will receive an e-mail once this audit is created.</p>
                            <ul class="usa-button-group">
                                <li class="usa-button-group__item">
                                    <button class="usa-button" id="create">
                                        Save and create audit
                                    </button>
                                </li>
                                <li class="usa-button-group__item margin-left-4">{% include "../cancel-button.html" %}</li>
                            </ul>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="{% static 'compiled/js/check-access.js' %}"
            type="text/javascript"></script>
{% endblock %}
